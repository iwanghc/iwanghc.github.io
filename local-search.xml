<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>MCP Google Web Search</title>
    <link href="/2025/08/13/mcp_web_search/"/>
    <url>/2025/08/13/mcp_web_search/</url>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªåŸºäº Playwright çš„ Python å·¥å…·ï¼Œèƒ½å¤Ÿç»•è¿‡æœç´¢å¼•æ“çš„åçˆ¬è™«æœºåˆ¶ï¼Œæ‰§è¡Œ Google æœç´¢å¹¶æå–ç»“æœã€‚å®ƒå¯ä½œä¸ºå‘½ä»¤è¡Œå·¥å…·ç›´æ¥ä½¿ç”¨ï¼Œæˆ–é€šè¿‡ Model Context Protocol (MCP) æœåŠ¡å™¨ä¸ºæ¨¡å‹æä¾›å®æ—¶æœç´¢èƒ½åŠ›ã€‚</p><span id="more"></span><h3 id="æºç åœ°å€"><a href="#æºç åœ°å€" class="headerlink" title="æºç åœ°å€"></a>æºç åœ°å€</h3><p><a href="https://github.com/iwanghc/mcp_web_search">ç‚¹å‡»è·³è½¬ MCP Google Web Search GitHubæºç è·å–å·¥å…·</a></p><h3 id="æ ¸å¿ƒäº®ç‚¹"><a href="#æ ¸å¿ƒäº®ç‚¹" class="headerlink" title="æ ¸å¿ƒäº®ç‚¹"></a>æ ¸å¿ƒäº®ç‚¹</h3><ul><li><strong>æœ¬åœ°åŒ– SERP API æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šæ— éœ€ä¾èµ–ä»˜è´¹çš„æœç´¢å¼•æ“ç»“æœ API æœåŠ¡ï¼Œå®Œå…¨åœ¨æœ¬åœ°æ‰§è¡Œæœç´¢æ“ä½œ</li><li><strong>å…ˆè¿›çš„åæœºå™¨äººæ£€æµ‹ç»•è¿‡æŠ€æœ¯</strong>ï¼š<ul><li>æ™ºèƒ½æµè§ˆå™¨æŒ‡çº¹ç®¡ç†ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º</li><li>è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤æµè§ˆå™¨çŠ¶æ€ï¼Œå‡å°‘éªŒè¯é¢‘ç‡</li><li>æ— å¤´&#x2F;æœ‰å¤´æ¨¡å¼æ™ºèƒ½åˆ‡æ¢ï¼Œé‡åˆ°éªŒè¯æ—¶è‡ªåŠ¨è½¬ä¸ºæœ‰å¤´æ¨¡å¼è®©ç”¨æˆ·å®ŒæˆéªŒè¯</li><li>å¤šç§è®¾å¤‡å’ŒåŒºåŸŸè®¾ç½®éšæœºåŒ–ï¼Œé™ä½è¢«æ£€æµ‹é£é™©</li></ul></li><li><strong>åŸå§‹HTMLè·å–</strong>ï¼šèƒ½å¤Ÿè·å–æœç´¢ç»“æœé¡µé¢çš„åŸå§‹HTMLï¼ˆå·²ç§»é™¤CSSå’ŒJavaScriptï¼‰ï¼Œç”¨äºåˆ†æå’Œè°ƒè¯•Googleé¡µé¢ç»“æ„å˜åŒ–æ—¶çš„æå–ç­–ç•¥</li><li><strong>ç½‘é¡µæˆªå›¾åŠŸèƒ½</strong>ï¼šåœ¨ä¿å­˜HTMLå†…å®¹çš„åŒæ—¶ï¼Œè‡ªåŠ¨æ•è·å¹¶ä¿å­˜å®Œæ•´ç½‘é¡µæˆªå›¾</li><li><strong>MCP æœåŠ¡å™¨é›†æˆ</strong>ï¼šä¸º Claude ç­‰ AI åŠ©æ‰‹æä¾›å®æ—¶æœç´¢èƒ½åŠ›ï¼Œæ— éœ€é¢å¤– API å¯†é’¥</li><li><strong>å®Œå…¨å¼€æºå…è´¹</strong>ï¼šæ‰€æœ‰ä»£ç å¼€æºï¼Œæ— ä½¿ç”¨é™åˆ¶ï¼Œå¯è‡ªç”±å®šåˆ¶å’Œæ‰©å±•</li><li><strong>PythonåŸç”Ÿ</strong>ï¼šä½¿ç”¨Pythonæ„å»ºï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œæ›´å®¹æ˜“çš„éƒ¨ç½²</li></ul><h3 id="æŠ€æœ¯ç‰¹æ€§"><a href="#æŠ€æœ¯ç‰¹æ€§" class="headerlink" title="æŠ€æœ¯ç‰¹æ€§"></a>æŠ€æœ¯ç‰¹æ€§</h3><ul><li><strong>ä½¿ç”¨ Python 3.8+ å¼€å‘</strong>ï¼Œæä¾›ä¼˜ç§€çš„æ€§èƒ½å’Œå¹¿æ³›çš„å…¼å®¹æ€§</li><li>åŸºäº <strong>Playwright</strong> å®ç°æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œæ”¯æŒå¤šç§æµè§ˆå™¨å¼•æ“</li><li>æ”¯æŒå‘½ä»¤è¡Œå‚æ•°è¾“å…¥æœç´¢å…³é”®è¯</li><li><strong>MCP æœåŠ¡å™¨æ”¯æŒ</strong>ï¼Œä¸º Claude ç­‰ AI åŠ©æ‰‹æä¾›æœç´¢èƒ½åŠ›</li><li>è¿”å›æœç´¢ç»“æœçš„æ ‡é¢˜ã€é“¾æ¥å’Œæ‘˜è¦</li><li>æ”¯æŒè·å–æœç´¢ç»“æœé¡µé¢çš„åŸå§‹HTMLç”¨äºåˆ†æ</li><li>ä»¥ JSON æ ¼å¼è¾“å‡ºç»“æœ</li><li>æ”¯æŒæ— å¤´æ¨¡å¼å’Œæœ‰å¤´æ¨¡å¼ï¼ˆè°ƒè¯•ç”¨ï¼‰</li><li>æä¾›è¯¦ç»†çš„æ—¥å¿—è¾“å‡º</li><li>å¥å£®çš„é”™è¯¯å¤„ç†æœºåˆ¶</li><li>æ”¯æŒä¿å­˜å’Œæ¢å¤æµè§ˆå™¨çŠ¶æ€ï¼Œæœ‰æ•ˆé¿å…åæœºå™¨äººæ£€æµ‹</li><li><strong>å¤šå±‚åçˆ¬è™«ä¿æŠ¤æœºåˆ¶</strong></li></ul><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><h4 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œ</span><br>python cli.py <span class="hljs-string">&quot;æœç´¢å…³é”®è¯&quot;</span><br><br><span class="hljs-comment"># ä½¿ç”¨å‘½ä»¤è¡Œé€‰é¡¹</span><br>python cli.py --<span class="hljs-built_in">limit</span> 5 --<span class="hljs-built_in">timeout</span> 30000 <span class="hljs-string">&quot;æœç´¢å…³é”®è¯&quot;</span><br><br><span class="hljs-comment"># è·å–æœç´¢ç»“æœé¡µé¢çš„åŸå§‹HTML</span><br>python cli.py --get-html <span class="hljs-string">&quot;æœç´¢å…³é”®è¯&quot;</span><br><br><span class="hljs-comment"># è·å–HTMLå¹¶ä¿å­˜åˆ°æ–‡ä»¶</span><br>python cli.py --get-html --save-html <span class="hljs-string">&quot;æœç´¢å…³é”®è¯&quot;</span><br></code></pre></td></tr></table></figure><h4 id="MCPæœåŠ¡å™¨"><a href="#MCPæœåŠ¡å™¨" class="headerlink" title="MCPæœåŠ¡å™¨"></a>MCPæœåŠ¡å™¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨dotenv.envé…ç½®æ¨¡å‹API KEYç­‰ä¿¡æ¯</span><br><span class="hljs-comment"># ä½¿ç”¨MCPå®¢æˆ·ç«¯</span><br>python -m mcp_integration.client<br></code></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h3><p>ä»¥æŸ¥è¯¢ä¸Šæµ·å½“å¤©å¤©æ°”ä¸ºä¾‹</p><h4 id="MCPæœåŠ¡å™¨-1"><a href="#MCPæœåŠ¡å™¨-1" class="headerlink" title="MCPæœåŠ¡å™¨"></a>MCPæœåŠ¡å™¨</h4><p>è¿™é‡Œä½¿ç”¨deepseek v3ä½œä¸ºå®¢æˆ·ç«¯æ¨¡å‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs bash">(llmtool) PS D:\Ai\web_agent\google-search-main&gt; python -m mcp_integration.client<br>âœ… å·²è¿æ¥åˆ°Googleæœç´¢MCPæœåŠ¡å™¨ / Connected to Google Search MCP Server<br><br>ğŸš€ Googleæœç´¢å¢å¼ºç‰ˆMCPå®¢æˆ·ç«¯å·²å¯åŠ¨! / Google Search Enhanced MCP Client Started!<br>ğŸ’¡ ç°åœ¨ä½ å¯ä»¥è¯¢é—®ä»»ä½•éœ€è¦å®æ—¶ä¿¡æ¯çš„é—®é¢˜ / You can now ask any questions that require real-time information<br>ğŸ” ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨Googleæœç´¢æ¥è·å–æœ€æ–°ä¿¡æ¯ / The system will automatically use Google Search to get the latest information<br>ğŸ›¡ï¸ å·²å¯ç”¨åçˆ¬è™«ä¿æŠ¤æœºåˆ¶ / Anti-bot protection mechanism enabled<br>â“ è¾“å…¥ <span class="hljs-string">&#x27;quit&#x27;</span> é€€å‡ºç¨‹åº / Type <span class="hljs-string">&#x27;quit&#x27;</span> to <span class="hljs-built_in">exit</span> the program<br><br><br>ğŸ¤” è¯·è¾“å…¥ä½ çš„é—®é¢˜ / Please enter your question: ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”<br><br>â³ æ­£åœ¨å¤„ç†ä½ çš„é—®é¢˜... / Processing your question...<br>ğŸ”§ å¯ç”¨å·¥å…·: [<span class="hljs-string">&#x27;google-search&#x27;</span>, <span class="hljs-string">&#x27;get-webpage-html&#x27;</span>] / Available tools: [<span class="hljs-string">&#x27;google-search&#x27;</span>, <span class="hljs-string">&#x27;get-webpage-html&#x27;</span>]<br><br>ğŸ” æ­£åœ¨æ‰§è¡Œå·¥å…·: google-search / Executing tool: google-search<br>ğŸ“ Parameters: &#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”&quot;</span><br>&#125;<br>ğŸ“Š å·¥å…·æ‰§è¡Œç»“æœé•¿åº¦: 817 å­—ç¬¦ / Tool execution result length: 817 characters<br>ğŸ¤” è¯·è¾“å…¥ä½ çš„é—®é¢˜ / Please enter your question: ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”<br><br>â³ æ­£åœ¨å¤„ç†ä½ çš„é—®é¢˜... / Processing your question...<br>ğŸ”§ å¯ç”¨å·¥å…·: [<span class="hljs-string">&#x27;google-search&#x27;</span>, <span class="hljs-string">&#x27;get-webpage-html&#x27;</span>] / Available tools: [<span class="hljs-string">&#x27;google-search&#x27;</span>, <span class="hljs-string">&#x27;get-webpage-html&#x27;</span>]<br><br>ğŸ” æ­£åœ¨æ‰§è¡Œå·¥å…·: google-search / Executing tool: google-search<br>ğŸ“ Parameters: &#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”&quot;</span><br>&#125;<br>ğŸ“Š å·¥å…·æ‰§è¡Œç»“æœé•¿åº¦: 817 å­—ç¬¦ / Tool execution result length: 817 characters<br>ğŸ” æ­£åœ¨æ‰§è¡Œå·¥å…·: google-search / Executing tool: google-search<br>ğŸ“ Parameters: &#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”&quot;</span><br>&#125;<br>ğŸ“Š å·¥å…·æ‰§è¡Œç»“æœé•¿åº¦: 817 å­—ç¬¦ / Tool execution result length: 817 characters<br>  <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”&quot;</span><br>&#125;<br>ğŸ“Š å·¥å…·æ‰§è¡Œç»“æœé•¿åº¦: 817 å­—ç¬¦ / Tool execution result length: 817 characters<br>ğŸ“Š å·¥å…·æ‰§è¡Œç»“æœé•¿åº¦: 817 å­—ç¬¦ / Tool execution result length: 817 characters<br>ğŸ¤– æ­£åœ¨ç”Ÿæˆæœ€ç»ˆå›ç­”... / Generating final answer...<br><br>ğŸ¤– AIå›ç­” / AI Answer:<br>æ ¹æ®æœ€æ–°çš„å¤©æ°”é¢„æŠ¥ï¼Œä»Šå¤©ä¸Šæµ·ï¼ˆ8æœˆ15æ—¥ï¼‰çš„å¤©æ°”æƒ…å†µå¦‚ä¸‹ï¼š<br><br>- **å¤©æ°”çŠ¶å†µ**ï¼šå¤šäº‘ï¼Œå¯èƒ½æœ‰é˜µé›¨ã€‚<br>- **æ¸©åº¦èŒƒå›´**ï¼š28â„ƒï½35â„ƒï¼ˆéƒ¨åˆ†é¢„æŠ¥æ˜¾ç¤ºæœ€é«˜å¯è¾¾36â„ƒï¼‰ã€‚<br>- **é£å‘é£åŠ›**ï¼šä¸œå—é£ï¼Œé£åŠ›4-5çº§ã€‚<br>- **æ¹¿åº¦ä¸ä½“æ„Ÿ**ï¼šæ¹¿åº¦è¾ƒé«˜ï¼Œä½“æ„Ÿé—·çƒ­ï¼Œéœ€æ³¨æ„é˜²æš‘é™æ¸©ã€‚<br><br>å»ºè®®å¤–å‡ºæ—¶æºå¸¦é›¨å…·ï¼Œå¹¶åšå¥½é˜²æ™’å’Œè¡¥æ°´æªæ–½ã€‚å¦‚éœ€æ›´è¯¦ç»†çš„å®æ—¶æ›´æ–°ï¼Œå¯ä»¥å‚è€ƒ[ä¸Šæµ·æ°”è±¡å±€å®˜ç½‘](http://sh.cma.gov.cn)æˆ–[ä¸­å›½å¤©æ°”ç½‘](https://www.weather.com.cn)ã€‚<br><br>ï¼ˆæ³¨ï¼šä¸åŒå¹³å°é¢„æŠ¥å¯èƒ½å­˜åœ¨ç»†å¾®å·®å¼‚ï¼Œè¯·ä»¥å®æ—¶æ•°æ®ä¸ºå‡†ã€‚ï¼‰<br><br>ğŸ¤” è¯·è¾“å…¥ä½ çš„é—®é¢˜ / Please enter your question:<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·"><a href="#ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·"></a>ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) PS D:\Ai\web_agent\google-search-main&gt; python  .\cli.py <span class="hljs-string">&quot;ä¸Šæµ·å¤©æ°”&quot;</span> -l 3<br>2025-08-13 18:39:46 [INFO] æ­£åœ¨åˆå§‹åŒ–æµè§ˆå™¨... é€‰é¡¹: <span class="hljs-built_in">limit</span>=3, <span class="hljs-built_in">timeout</span>=30000, stateFile=./browser-state.json, noSaveState=False, locale=zh-CN<br>2025-08-13 18:39:46 [INFO] å‘ç°æµè§ˆå™¨çŠ¶æ€æ–‡ä»¶ï¼Œå°†ä½¿ç”¨ä¿å­˜çš„æµè§ˆå™¨çŠ¶æ€ä»¥é¿å…åæœºå™¨äººæ£€æµ‹: ./browser-state.json<br>2025-08-13 18:39:46 [INFO] å·²åŠ è½½ä¿å­˜çš„æµè§ˆå™¨æŒ‡çº¹é…ç½®<br>2025-08-13 18:39:46 [INFO] å‡†å¤‡ä»¥æ— å¤´æ¨¡å¼å¯åŠ¨æµè§ˆå™¨...<br>2025-08-13 18:39:46 [INFO] å‡†å¤‡ä»¥æ— å¤´æ¨¡å¼å¯åŠ¨æµè§ˆå™¨...<br>2025-08-13 18:39:48 [INFO] æµè§ˆå™¨å·²æˆåŠŸå¯åŠ¨!<br>2025-08-13 18:39:48 [INFO] ä½¿ç”¨ä¿å­˜çš„æµè§ˆå™¨æŒ‡çº¹é…ç½®<br>2025-08-13 18:39:48 [INFO] æ­£åœ¨åŠ è½½ä¿å­˜çš„æµè§ˆå™¨çŠ¶æ€...<br>2025-08-13 18:39:49 [INFO] ä½¿ç”¨ä¿å­˜çš„GoogleåŸŸå: https://www.google.ca<br>2025-08-13 18:39:49 [INFO] æ­£åœ¨è®¿é—®Googleæœç´¢é¡µé¢...<br>2025-08-13 18:39:52 [INFO] æ­£åœ¨è¾“å…¥æœç´¢å…³é”®è¯: ä¸Šæµ·å¤©æ°”<br>2025-08-13 18:39:52 [INFO] æ‰¾åˆ°æœç´¢æ¡†: textarea[name=<span class="hljs-string">&#x27;q&#x27;</span>]<br>2025-08-13 18:39:53 [INFO] å·²è¾“å…¥æœç´¢å…³é”®è¯: ä¸Šæµ·å¤©æ°”<br>2025-08-13 18:39:53 [INFO] å°è¯•æ–¹å¼1ï¼šæŒ‰å›è½¦é”®æ‰§è¡Œæœç´¢<br>2025-08-13 18:39:53 [INFO] å›è½¦é”®æœç´¢æ‰§è¡Œå®Œæˆ<br>2025-08-13 18:39:53 [INFO] æœç´¢æ‰§è¡Œå®Œæˆï¼Œç­‰å¾…é¡µé¢åŠ è½½<br>2025-08-13 18:39:53 [INFO] é¡µé¢åŠ è½½ä¸­...<br>2025-08-13 18:39:56 [INFO] é¡µé¢åŠ è½½å®Œæˆåçš„æœ€ç»ˆURL: https://www.google.com/search?q=%E4%B8%8A%E6%B5%B7%E5%A4%A9%E6%B0%94&amp;sca_esv=827ca067cae54b45&amp;<span class="hljs-built_in">source</span>=hp&amp;ei=dWucaNPjDtOOvr0PksLiiAw&amp;iflsig=AOw8s4IAAAAAaJx5hQiAX9rhuX69Uct8CmWVqRzJNKy_&amp;ved=0ahUKEwiT8ra1zIePAxVTh68BHRKhGMEQ4dUDCA0&amp;uact=5&amp;oq=%E4%B8%8A%E6%B5%B7%E5%A4%A9%E6%B0%94&amp;gs_lp=Egdnd3Mtd2l6IgzkuIrmtbflpKnmsJQyChAAGIAEGEMYigUyChAAGIAEGEMYigUyBRAAGIAEMgoQABiABBhDGIoFMgoQABiABBhDGIoFMgUQABiABDILEC4YgAQYxwEYrwEyBRAAGIAEMgUQABiABDIFEAAYgARIwQtQ-gZY1gdwAXgAkAEAmAGNAaABlQSqAQMwLjS4AQPIAQD4AQGYAgWgAqUEqAIKwgIaEAAYgAQYtAIY1AMY5QIYtwMYigUY6gIYigPCAgoQLhiABBhDGIoFwgIUEC4YgAQYxwEYmAUYmQUYngUYrwGYAwbxBX1VgDr52RiXkgcDMS40oAfHILIHAzAuNLgHnwTCBwUwLjQuMcgHDA&amp;sclient=gws-wiz<br>2025-08-13 18:39:56 [INFO] æœç´¢æ‰§è¡Œåçš„URLæ£€æŸ¥: https://www.google.com/search?q=%E4%B8%8A%E6%B5%B7%E5%A4%A9%E6%B0%94&amp;sca_esv=827ca067cae54b45&amp;<span class="hljs-built_in">source</span>=hp&amp;ei=dWucaNPjDtOOvr0PksLiiAw&amp;iflsig=AOw8s4IAAAAAaJx5hQiAX9rhuX69Uct8CmWVqRzJNKy_&amp;ved=0ahUKEwiT8ra1zIePAxVTh68BHRKhGMEQ4dUDCA0&amp;uact=5&amp;oq=%E4%B8%8A%E6%B5%B7%E5%A4%A9%E6%B0%94&amp;gs_lp=Egdnd3Mtd2l6IgzkuIrmtbflpKnmsJQyChAAGIAEGEMYigUyChAAGIAEGEMYigUyBRAAGIAEMgoQABiABBhDGIoFMgoQABiABBhDGIoFMgUQABiABDILEC4YgAQYxwEYrwEyBRAAGIAEMgUQABiABDIFEAAYgARIwQtQ-gZY1gdwAXgAkAEAmAGNAaABlQSqAQMwLjS4AQPIAQD4AQGYAgWgAqUEqAIKwgIaEAAYgAQYtAIY1AMY5QIYtwMYigUY6gIYigPCAgoQLhiABBhDGIoFwgIUEC4YgAQYxwEYmAUYmQUYngUYrwGYAwbxBX1VgDr52RiXkgcDMS40oAfHILIHAzAuNLgHnwTCBwUwLjQuMcgHDA&amp;sclient=gws-wiz, query: ä¸Šæµ·å¤©æ°”<br>2025-08-13 18:39:56 [INFO] æ­£åœ¨ç­‰å¾…æœç´¢ç»“æœåŠ è½½... URL: https://www.google.com/search?q=%E4%B8%8A%E6%B5%B7%E5%A4%A9%E6%B0%94&amp;sca_esv=827ca067cae54b45&amp;<span class="hljs-built_in">source</span>=hp&amp;ei=dWucaNPjDtOOvr0PksLiiAw&amp;iflsig=AOw8s4IAAAAAaJx5hQiAX9rhuX69Uct8CmWVqRzJNKy_&amp;ved=0ahUKEwiT8ra1zIePAxVTh68BHRKhGMEQ4dUDCA0&amp;uact=5&amp;oq=%E4%B8%8A%E6%B5%B7%E5%A4%A9%E6%B0%94&amp;gs_lp=Egdnd3Mtd2l6IgzkuIrmtbflpKnmsJQyChAAGIAEGEMYigUyChAAGIAEGEMYigUyBRAAGIAEMgoQABiABBhDGIoFMgoQABiABBhDGIoFMgUQABiABDILEC4YgAQYxwEYrwEyBRAAGIAEMgUQABiABDIFEAAYgARIwQtQ-gZY1gdwAXgAkAEAmAGNAaABlQSqAQMwLjS4AQPIAQD4AQGYAgWgAqUEqAIKwgIaEAAYgAQYtAIY1AMY5QIYtwMYigUY6gIYigPCAgoQLhiABBhDGIoFwgIUEC4YgAQYxwEYmAUYmQUYngUYrwGYAwbxBX1VgDr52RiXkgcDMS40oAfHILIHAzAuNLgHnwTCBwUwLjQuMcgHDA&amp;sclient=gws-wiz<br>2025-08-13 18:39:56 [INFO] å°è¯•ç­‰å¾…é€‰æ‹©å™¨: <span class="hljs-comment">#search</span><br>2025-08-13 18:39:56 [INFO] æ‰¾åˆ°æœç´¢ç»“æœ: <span class="hljs-comment">#search, å°è¯•æ¬¡æ•°: 1</span><br>2025-08-13 18:39:56 [INFO] æ­£åœ¨æå–æœç´¢ç»“æœ...<br>2025-08-13 18:39:56 [INFO] æˆåŠŸè·å–åˆ°æœç´¢ç»“æœ: 3 æ¡<br>2025-08-13 18:39:56 [INFO] æ­£åœ¨ä¿å­˜æµè§ˆå™¨çŠ¶æ€: ./browser-state.json<br>2025-08-13 18:39:56 [INFO] æµè§ˆå™¨çŠ¶æ€ä¿å­˜æˆåŠŸ!<br>2025-08-13 18:39:56 [INFO] æŒ‡çº¹é…ç½®å·²ä¿å­˜: ./browser-state-fingerprint.json<br>2025-08-13 18:39:56 [INFO] æ­£åœ¨å…³é—­æµè§ˆå™¨...<br>2025-08-13 18:39:57 [INFO] æµè§ˆå™¨å·²æˆåŠŸå…³é—­<br>2025-08-13 18:39:57 [INFO] Playwrightå·²æˆåŠŸåœæ­¢<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;ä¸Šæµ·å¤©æ°”&quot;</span>,<br>  <span class="hljs-string">&quot;results&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;é¢„æŠ¥- ä¸Šæµ·&quot;</span>,<br>      <span class="hljs-string">&quot;link&quot;</span>: <span class="hljs-string">&quot;https://www.weather.com.cn/weather/101020100.shtml&quot;</span>,<br>      <span class="hljs-string">&quot;snippet&quot;</span>: <span class="hljs-string">&quot;13æ—¥ï¼ˆä»Šå¤©ï¼‰. å°é›¨. 28â„ƒ. 3-4çº§ Â· 14æ—¥ï¼ˆæ˜å¤©ï¼‰. é˜´. 36â„ƒ/28â„ƒ. 3-4çº§ Â· 15æ—¥ï¼ˆåå¤©ï¼‰. é˜´. 35â„ƒ/28â„ƒ. 3-4çº§è½¬&lt;3çº§ Â· 16æ—¥ï¼ˆå‘¨å…­ï¼‰. é˜´. 35â„ƒ/28â„ƒ. 3-4çº§è½¬&lt;3çº§ Â· 17æ—¥ï¼ˆå‘¨æ—¥ï¼‰. é˜´. 35 ...&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;ä¸­å›½æ°”è±¡å±€-å¤©æ°”é¢„æŠ¥-åŸå¸‚é¢„æŠ¥- ä¸Šæµ·&quot;</span>,<br>      <span class="hljs-string">&quot;link&quot;</span>: <span class="hljs-string">&quot;https://weather.cma.cn/web/weather/58367.html&quot;</span>,<br>      <span class="hljs-string">&quot;snippet&quot;</span>: <span class="hljs-string">&quot;é£å‘ Â· æ°”å‹ Â· æ¹¿åº¦ ; ä¸œå—é£ Â· 1010.1hPa Â· 80.1% ; ä¸œå—é£ Â· 1010.5hPa Â· 64.5% ...&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;ä¸Šæµ·(Shanghai)(ä¸­å›½)ã®å¤©æ°— - æ—¥æœ¬æ°—è±¡å”ä¼š tenki.jp&quot;</span>,<br>      <span class="hljs-string">&quot;link&quot;</span>: <span class="hljs-string">&quot;https://tenki.jp/world/5/90/58362/&quot;</span>,<br>      <span class="hljs-string">&quot;snippet&quot;</span>: <span class="hljs-string">&quot;æ—¥ä»˜, å¤©æ°—, æ°—æ¸©(â„ƒ), æ¹¿åº¦(ï¼…), é¢¨é€Ÿ(m/s). 14æ—¥ (æœ¨), æ™´. 33â„ƒ. 30â„ƒ. 73%. 7. 15æ—¥ (é‡‘), æ™´. 33â„ƒ. 29â„ƒ. 72%. 6. 16æ—¥ (åœŸ), æ™´. 33â„ƒ. 29â„ƒ.&quot;</span><br>    &#125;<br>  ]<br>&#125;<br>(base) PS D:\Ai\web_agent\google-search-main&gt; <br></code></pre></td></tr></table></figure><h3 id="æœç´¢å¢å¼º"><a href="#æœç´¢å¢å¼º" class="headerlink" title="æœç´¢å¢å¼º"></a>æœç´¢å¢å¼º</h3><p>ä¹Ÿå¯ä»¥ç»“åˆä¸€äº›è°·æ­Œæœç´¢è¿ç®—ç¬¦ä½¿ç”¨ï¼Œæé«˜æŸ¥è¯¢ç»“æœçš„å‡†ç¡®æ€§å’Œå¯ä¿¡åº¦ï¼Œæ¯”å¦‚: <a href="https://developers.google.com/search/docs/monitor-debug/search-operators/all-search-site?hl=zh-cn">site: æœç´¢è¿ç®—ç¬¦</a>ã€åŒå¼•å·ç­‰</p><p>å®Œï¼</p>]]></content>
    
    
    <categories>
      
      <category>AIå¤§æ¨¡å‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>MCP</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤©æ‰ç¬¬é›¶æ­¥ï¼šå¤§æ¨¡å‹çš„å‰å¤œ</title>
    <link href="/2025/06/26/night-before-the-big-model/"/>
    <url>/2025/06/26/night-before-the-big-model/</url>
    
    <content type="html"><![CDATA[<p>å¤©æ‰ç¬¬é›¶æ­¥ï¼šå¤§æ¨¡å‹çš„å‰å¤œ</p><span id="more"></span><p>å‚è€ƒ</p><ol><li><a href="https://github.com/microsoft/AI-System/blob/main/Textbook/%E7%AC%AC1%E7%AB%A0-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/1.1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%8E%86%E5%8F%B2%EF%BC%8C%E7%8E%B0%E7%8A%B6%E4%B8%8E%E5%8F%91%E5%B1%95.md">æ·±åº¦å­¦ä¹ çš„å†å²ï¼Œç°çŠ¶ä¸å‘å±•</a></li><li><a href="https://github.com/ruanyf/weekly/blob/master/docs/issue-348.md">æé£é£ä¸ImageNet</a></li><li><a href="https://github.com/microsoft/AI-System/blob/main/Textbook/%E7%AC%AC2%E7%AB%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/2.2-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E8%AE%AD%E7%BB%83.md">ç¥ç»ç½‘ç»œçš„è®­ç»ƒ</a></li></ol><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><h3 id="è¯´å‡ºä½ è§‰å¾—AIé¢†åŸŸçš„æœ€è®©ä½ éœ‡æ’¼çš„äº‹ä»¶ï¼š"><a href="#è¯´å‡ºä½ è§‰å¾—AIé¢†åŸŸçš„æœ€è®©ä½ éœ‡æ’¼çš„äº‹ä»¶ï¼š" class="headerlink" title="è¯´å‡ºä½ è§‰å¾—AIé¢†åŸŸçš„æœ€è®©ä½ éœ‡æ’¼çš„äº‹ä»¶ï¼š"></a>è¯´å‡ºä½ è§‰å¾—AIé¢†åŸŸçš„æœ€è®©ä½ éœ‡æ’¼çš„äº‹ä»¶ï¼š</h3><p>å­¦æœ¯ç•Œçš„èŒƒå¼è½¬æ¢ï¼š<br>æ­¤å‰ï¼Œç¥ç»ç½‘ç»œå› è®¡ç®—èµ„æºé™åˆ¶å’Œç†è®ºç“¶é¢ˆè¢«å†·è½å¤šå¹´ã€‚AlexNet çš„èƒœåˆ©å½»åº•æ‰“ç ´äº†è¿™ä¸€åƒµå±€ï¼Œä¿ƒä½¿ç ”ç©¶äººå‘˜é‡æ–°èšç„¦æ·±åº¦ç½‘ç»œã€‚éšåï¼ŒVGGã€ResNetã€Transformer ç­‰æ¨¡å‹ç›¸ç»§æ¶Œç°ï¼Œä¸æ–­åˆ·æ–° ImageNet çš„æ€§èƒ½è®°å½•ï¼ˆå¦‚ ResNet å°†é”™è¯¯ç‡é™è‡³ 3.57%ï¼‰ã€‚<br>å·¥ä¸šç•Œçš„æŠ€æœ¯çˆ†å‘ï¼š<br>æ·±åº¦å­¦ä¹ è¿…é€Ÿæ¸—é€åˆ°å›¾åƒè¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸã€‚ä¾‹å¦‚ï¼ŒGoogle å°† CNN ç”¨äºè¡—æ™¯å­—ç¬¦è¯†åˆ«ï¼Œå‡†ç¡®ç‡æå‡è‡³ 98%ï¼›Facebook åˆ©ç”¨æ·±åº¦å­¦ä¹ ä¼˜åŒ–å›¾åƒæ¨èç®—æ³•ï¼Œç”¨æˆ·æ´»è·ƒåº¦å¤§å¹…æå‡ã€‚<br>æ•°æ®ä¸ç®—åŠ›çš„ååŒè¿›åŒ–ï¼š<br>ImageNet é¡¹ç›®ï¼ˆç”±æé£é£ä¸»å¯¼ï¼‰æä¾›çš„ 1400 ä¸‡å¼ æ ‡æ³¨å›¾åƒ215ï¼Œä¸ GPU åŠ é€ŸæŠ€æœ¯å½¢æˆè‰¯æ€§å¾ªç¯ã€‚æ­¤åï¼Œå¤§è§„æ¨¡æ•°æ®é›†ï¼ˆå¦‚ COCOã€SQuADï¼‰å’Œä¸“ç”¨èŠ¯ç‰‡ï¼ˆå¦‚ TPUï¼‰æˆä¸º AI å‘å±•çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚</p><p>äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€LLMåè¯ä¹‹é—´çš„å…³ç³»ï¼š<br>AIæ˜¯è®©æœºå™¨å…·å¤‡æ™ºèƒ½çš„å®è§‚ç›®æ ‡ï¼Œæœºå™¨å­¦ä¹ æ˜¯å®ç° AI çš„æ ¸å¿ƒæ–¹æ³•ï¼ˆä»æ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ è§„å¾‹ï¼‰ï¼Œæ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„è¿›é˜¶æŠ€æœ¯ï¼ˆåŸºäºå¤šå±‚ç¥ç»ç½‘ç»œè‡ªåŠ¨æå–ç‰¹å¾ï¼‰ï¼ŒLLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰ åˆ™æ˜¯æ·±åº¦å­¦ä¹ åœ¨è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸçš„å…¸å‹åº”ç”¨ï¼ˆå¦‚ GPT-4ï¼‰ï¼Œå››è€…å‘ˆ â€œåŒ…å«ä¸é€’è¿›â€ çš„æŠ€æœ¯å±‚çº§å…³ç³»ã€‚</p><h3 id="RNNä¸CNNçš„é€‚ç”¨åœºæ™¯ï¼š"><a href="#RNNä¸CNNçš„é€‚ç”¨åœºæ™¯ï¼š" class="headerlink" title="RNNä¸CNNçš„é€‚ç”¨åœºæ™¯ï¼š"></a>RNNä¸CNNçš„é€‚ç”¨åœºæ™¯ï¼š</h3><p>RNN çš„æ ¸å¿ƒé€‚ç”¨åœºæ™¯</p><ol><li>æ—¶åºåºåˆ—å¤„ç†<br>åœºæ™¯ï¼šæ—¶é—´åºåˆ—é¢„æµ‹ï¼ˆè‚¡ç¥¨ä»·æ ¼ã€å¤©æ°”æ•°æ®ï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆéŸ³é¢‘ä¿¡å·æŒ‰æ—¶é—´å¸§è¾“å…¥ï¼‰ã€‚<br>æ¡ˆä¾‹ï¼šGoogle çš„ WaveNet ç”¨ RNN ç”Ÿæˆè‡ªç„¶è¯­éŸ³ï¼Œé€šè¿‡æ•æ‰éŸ³é¢‘å¸§é—´çš„æ—¶åºä¾èµ–è¿˜åŸäººå£°éŸµå¾‹ã€‚</li><li>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰<br>åœºæ™¯ï¼šæœºå™¨ç¿»è¯‘ï¼ˆå¦‚ â€œæˆ‘çˆ±ä¸­å›½â€â†’â€œI love Chinaâ€ éœ€æŒ‰è¯­åºè½¬æ¢ï¼‰ã€æ–‡æœ¬ç”Ÿæˆï¼ˆå°è¯´ç»­å†™ã€è¯—æ­Œåˆ›ä½œï¼‰ã€‚<br>æ¡ˆä¾‹ï¼šæ—©æœŸ GPT-1 åŸºäº TransformerDecoderï¼ˆå« RNN-like åºåˆ—å¤„ç†é€»è¾‘ï¼‰ç”Ÿæˆè¿è´¯æ–‡æœ¬ã€‚</li><li>åºåˆ—æ ‡æ³¨ä»»åŠ¡<br>åœºæ™¯ï¼šåˆ†è¯ï¼ˆâ€œæˆ‘çˆ±åŒ—äº¬â€ æ ‡æ³¨ä¸º â€œæˆ‘ &#x2F; çˆ± &#x2F; åŒ—äº¬â€ï¼‰ã€å‘½åå®ä½“è¯†åˆ«ï¼ˆæå– â€œå¼ ä¸‰â€â€œä¸Šæµ·â€ ç­‰å®ä½“ï¼‰ã€‚<br>æ¡ˆä¾‹ï¼šLSTM+CRF æ¨¡å‹åœ¨ä¸­æ–‡åˆ†è¯ä»»åŠ¡ä¸­å‡†ç¡®ç‡è¶… 98%ã€‚<br>CNN çš„æ ¸å¿ƒé€‚ç”¨åœºæ™¯</li><li>è®¡ç®—æœºè§†è§‰ï¼ˆCVï¼‰<br>åœºæ™¯ï¼šå›¾åƒåˆ†ç±»ï¼ˆè¯†åˆ« â€œçŒ«â€â€œç‹—â€ï¼‰ã€ç›®æ ‡æ£€æµ‹ï¼ˆæ ‡æ³¨å›¾åƒä¸­ç‰©ä½“ä½ç½®ï¼‰ã€è¯­ä¹‰åˆ†å‰²ï¼ˆåƒç´ çº§åˆ†ç±»ï¼‰ã€‚<br>æ¡ˆä¾‹ï¼šResNet åœ¨ ImageNet å›¾åƒåˆ†ç±»ä¸­å‡†ç¡®ç‡è¾¾ 96.4%ï¼ŒYOLO ç³»åˆ—æ¨¡å‹å®æ—¶æ£€æµ‹è§†é¢‘ä¸­çš„å¤šç›®æ ‡ã€‚</li><li>ç½‘æ ¼ç»“æ„æ•°æ®<br>åœºæ™¯ï¼šåŒ»å­¦å½±åƒåˆ†æï¼ˆCT æ‰«æå›¾ä¸­çš„ç—…ç¶æ£€æµ‹ï¼‰ã€å«æ˜Ÿé¥æ„Ÿå›¾åƒï¼ˆå†œç”° &#x2F; åŸå¸‚åŒºåŸŸåˆ†å‰²ï¼‰ã€‚<br>æ¡ˆä¾‹ï¼šU-Net ç½‘ç»œç”¨ CNN æå–åŒ»å­¦å›¾åƒçš„å¤šå°ºåº¦ç‰¹å¾ï¼Œç²¾å‡†åˆ†å‰²è‚¿ç˜¤åŒºåŸŸã€‚</li><li>è§†é¢‘ä¸æ—¶ç©ºæ•°æ®<br>åœºæ™¯ï¼šåŠ¨ä½œè¯†åˆ«ï¼ˆè§†é¢‘ä¸­ â€œè·‘æ­¥â€â€œæŒ¥æ‰‹â€ åŠ¨ä½œåˆ†ç±»ï¼‰ã€è§†é¢‘ç”Ÿæˆï¼ˆå¦‚ DeepMind çš„ VideoGPTï¼‰ã€‚<br>æŠ€æœ¯é€»è¾‘ï¼šä¸‰ç»´ CNN åŒæ—¶å¤„ç†ç©ºé—´ï¼ˆå¸§å†…åƒç´ ï¼‰å’Œæ—¶é—´ï¼ˆå¸§é—´è¿åŠ¨ï¼‰ç»´åº¦ï¼Œå¦‚ C3D æ¨¡å‹ç”¨äºè§†é¢‘åŠ¨ä½œç†è§£ã€‚</li></ol><p>æ€»ç»“<br>CNN ç”¨äºå¤„ç†ç»“æ„åŒ–&#x2F;ç©ºé—´æ•°æ®ï¼Œå°¤å…¶æ˜¯å›¾åƒã€çŸ­æ–‡æœ¬ã€‚</p><p>RNN æ“…é•¿å¤„ç†é¡ºåºç›¸å…³ã€æ—¶é—´ä¾èµ–ä¿¡æ¯ã€‚</p><h3 id="é™„åŠ é¢˜ï¼ˆé€‰åšï¼‰"><a href="#é™„åŠ é¢˜ï¼ˆé€‰åšï¼‰" class="headerlink" title="é™„åŠ é¢˜ï¼ˆé€‰åšï¼‰"></a>é™„åŠ é¢˜ï¼ˆé€‰åšï¼‰</h3><h4 id="è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼ˆå»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾åˆ°main-pyé‡Œï¼‰ï¼š"><a href="#è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼ˆå»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾åˆ°main-pyé‡Œï¼‰ï¼š" class="headerlink" title="è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼ˆå»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾åˆ°main.pyé‡Œï¼‰ï¼š"></a>è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼ˆå»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾åˆ°main.pyé‡Œï¼‰ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim<br><span class="hljs-keyword">import</span> torchvision<br><span class="hljs-keyword">import</span> torchvision.transforms <span class="hljs-keyword">as</span> transforms<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> argparse<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br> <br> <br><span class="hljs-comment"># ä½¿ç”¨è®¾å¤‡</span><br>device = torch.device(<span class="hljs-string">&quot;cuda&quot;</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;cpu&quot;</span>)<br> <br> <br><span class="hljs-comment"># æ¨¡å‹å®šä¹‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CNNModel</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(CNNModel, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.network = nn.Sequential(<br>            nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">32</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>),<br>            nn.ReLU(),<br>            nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>),<br>            nn.Conv2d(<span class="hljs-number">32</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>),<br>            nn.ReLU(),<br>            nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>),<br>            nn.Flatten(),<br>            nn.Linear(<span class="hljs-number">64</span> * <span class="hljs-number">7</span> * <span class="hljs-number">7</span>, <span class="hljs-number">128</span>),<br>            nn.ReLU(),<br>            nn.Dropout(<span class="hljs-number">0.5</span>),<br>            nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">10</span>),<br>        )<br> <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.network(x)<br> <br> <br><span class="hljs-comment"># é€šç”¨æ•°æ®åŠ è½½å™¨</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>():<br>    transform = transforms.Compose(<br>        [transforms.ToTensor(), transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))]<br>    )<br>    train_dataset = torchvision.datasets.MNIST(<br>        root=<span class="hljs-string">&quot;./data&quot;</span>, train=<span class="hljs-literal">True</span>, transform=transform, download=<span class="hljs-literal">True</span><br>    )<br>    test_dataset = torchvision.datasets.MNIST(<br>        root=<span class="hljs-string">&quot;./data&quot;</span>, train=<span class="hljs-literal">False</span>, transform=transform, download=<span class="hljs-literal">True</span><br>    )<br> <br>    train_loader = DataLoader(train_dataset, batch_size=<span class="hljs-number">64</span>, shuffle=<span class="hljs-literal">True</span>)<br>    test_loader = DataLoader(test_dataset, batch_size=<span class="hljs-number">1000</span>, shuffle=<span class="hljs-literal">False</span>)<br> <br>    <span class="hljs-keyword">return</span> train_loader, test_loader<br> <br> <br><span class="hljs-comment"># è®­ç»ƒå‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_model</span>():<br>    train_loader, test_loader = load_data()<br>    model = CNNModel().to(device)<br>    criterion = nn.CrossEntropyLoss()<br>    optimizer = optim.Adam(model.parameters(), lr=<span class="hljs-number">0.001</span>)<br> <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹è®­ç»ƒæ¨¡å‹...&quot;</span>)<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        model.train()<br>        running_loss = <span class="hljs-number">0.0</span><br>        <span class="hljs-keyword">for</span> images, labels <span class="hljs-keyword">in</span> train_loader:<br>            images, labels = images.to(device), labels.to(device)<br>            outputs = model(images)<br>            loss = criterion(outputs, labels)<br> <br>            optimizer.zero_grad()<br>            loss.backward()<br>            optimizer.step()<br>            running_loss += loss.item()<br> <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Epoch <span class="hljs-subst">&#123;epoch+<span class="hljs-number">1</span>&#125;</span>, Loss: <span class="hljs-subst">&#123;running_loss/<span class="hljs-built_in">len</span>(train_loader):<span class="hljs-number">.4</span>f&#125;</span>&quot;</span>)<br> <br>    <span class="hljs-comment"># ä¿å­˜æ¨¡å‹</span><br>    torch.save(model.state_dict(), <span class="hljs-string">&quot;cnn_model.pth&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¨¡å‹å·²ä¿å­˜ä¸º cnn_model.pth&quot;</span>)<br> <br> <br><span class="hljs-comment"># æ¨ç†å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>():<br>    _, test_loader = load_data()<br>    model = CNNModel().to(device)<br> <br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(<span class="hljs-string">&quot;cnn_model.pth&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¨¡å‹æ–‡ä»¶ cnn_model.pth ä¸å­˜åœ¨ï¼Œè¯·å…ˆè®­ç»ƒæ¨¡å‹&quot;</span>)<br>        <span class="hljs-keyword">return</span><br> <br>    model.load_state_dict(torch.load(<span class="hljs-string">&quot;cnn_model.pth&quot;</span>, map_location=device))<br>    model.<span class="hljs-built_in">eval</span>()<br> <br>    correct = <span class="hljs-number">0</span><br>    total = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> images, labels <span class="hljs-keyword">in</span> test_loader:<br>            images, labels = images.to(device), labels.to(device)<br>            outputs = model(images)<br>            _, predicted = torch.<span class="hljs-built_in">max</span>(outputs, <span class="hljs-number">1</span>)<br>            total += labels.size(<span class="hljs-number">0</span>)<br>            correct += (predicted == labels).<span class="hljs-built_in">sum</span>().item()<br> <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æµ‹è¯•é›†å‡†ç¡®ç‡: <span class="hljs-subst">&#123;<span class="hljs-number">100</span> * correct / total:<span class="hljs-number">.2</span>f&#125;</span>%&quot;</span>)<br> <br>    <span class="hljs-comment"># å¯è§†åŒ–å‰ 5 å¼ </span><br>    batch_idx, (example_data, example_targets) = <span class="hljs-built_in">next</span>(<span class="hljs-built_in">enumerate</span>(test_loader))<br>    example_data = example_data.to(device)<br>    outputs = model(example_data)<br>    _, preds = torch.<span class="hljs-built_in">max</span>(outputs, <span class="hljs-number">1</span>)<br> <br>    plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, i + <span class="hljs-number">1</span>)<br>        plt.imshow(example_data[i].cpu().squeeze(), cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br>        plt.title(<span class="hljs-string">f&quot;Pred: <span class="hljs-subst">&#123;preds[i].item()&#125;</span>&quot;</span>)<br>        plt.axis(<span class="hljs-string">&quot;off&quot;</span>)<br>    plt.show()<br> <br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">image_path</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(<span class="hljs-string">&quot;cnn_model.pth&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¨¡å‹æ–‡ä»¶ cnn_model.pth ä¸å­˜åœ¨ï¼Œè¯·å…ˆè®­ç»ƒæ¨¡å‹&quot;</span>)<br>        <span class="hljs-keyword">return</span><br> <br>    model = CNNModel().to(device)<br>    model.load_state_dict(torch.load(<span class="hljs-string">&quot;cnn_model.pth&quot;</span>, map_location=device))<br>    model.<span class="hljs-built_in">eval</span>()<br> <br>    transform = transforms.Compose(<br>        [<br>            transforms.Grayscale(),  <span class="hljs-comment"># ç¡®ä¿æ˜¯å•é€šé“</span><br>            transforms.Resize((<span class="hljs-number">28</span>, <span class="hljs-number">28</span>)),  <span class="hljs-comment"># è°ƒæ•´å¤§å°</span><br>            transforms.ToTensor(),<br>            transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,)),<br>        ]<br>    )<br> <br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¼€å§‹è¯†åˆ«å›¾ç‰‡ <span class="hljs-subst">&#123;image_path&#125;</span>&quot;</span>)<br>        image = Image.<span class="hljs-built_in">open</span>(image_path)<br>        image = transform(image).unsqueeze(<span class="hljs-number">0</span>).to(device)<br> <br>        <span class="hljs-keyword">with</span> torch.no_grad():<br>            output = model(image)<br>            _, pred = torch.<span class="hljs-built_in">max</span>(output, <span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾ç‰‡ <span class="hljs-subst">&#123;image_path&#125;</span> çš„é¢„æµ‹ç»“æœæ˜¯ï¼š<span class="hljs-subst">&#123;pred.item()&#125;</span>&quot;</span>)<br> <br>        plt.imshow(image.squeeze().cpu(), cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br>        plt.title(<span class="hljs-string">f&quot;Predicted: <span class="hljs-subst">&#123;pred.item()&#125;</span>&quot;</span>)<br>        plt.axis(<span class="hljs-string">&quot;off&quot;</span>)<br>        plt.show()<br> <br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è¯†åˆ«å›¾ç‰‡å¤±è´¥ï¼š<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br> <br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">train:</span><br><span class="hljs-string">python main.py train</span><br><span class="hljs-string"> </span><br><span class="hljs-string">predict:</span><br><span class="hljs-string">python main.py predict</span><br><span class="hljs-string"> </span><br><span class="hljs-string">recognize:</span><br><span class="hljs-string">python main.py recognize --image test_2.png</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br> <br><span class="hljs-comment"># CNN å¯è§†åŒ–æ–‡æ¡£ï¼š https://poloclub.github.io/cnn-explainer/</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    parser = argparse.ArgumentParser(description=<span class="hljs-string">&quot;æ‰‹å†™æ•°å­—è¯†åˆ« CNN æ¨¡å‹&quot;</span>)<br>    subparsers = parser.add_subparsers(dest=<span class="hljs-string">&quot;mode&quot;</span>, required=<span class="hljs-literal">True</span>)<br> <br>    parser_train = subparsers.add_parser(<span class="hljs-string">&quot;train&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;è®­ç»ƒæ¨¡å‹&quot;</span>)<br>    parser_predict = subparsers.add_parser(<span class="hljs-string">&quot;predict&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;è¯„ä¼°æ¨¡å‹&quot;</span>)<br>    parser_recognize = subparsers.add_parser(<span class="hljs-string">&quot;recognize&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;è¯†åˆ«æœ¬åœ°å›¾ç‰‡&quot;</span>)<br>    parser_recognize.add_argument(<span class="hljs-string">&quot;--image&quot;</span>, required=<span class="hljs-literal">True</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;è¦è¯†åˆ«çš„å›¾ç‰‡è·¯å¾„&quot;</span>)<br> <br>    args = parser.parse_args()<br> <br>    <span class="hljs-keyword">if</span> args.mode == <span class="hljs-string">&quot;train&quot;</span>:<br>        train_model()<br>    <span class="hljs-keyword">elif</span> args.mode == <span class="hljs-string">&quot;predict&quot;</span>:<br>        predict()<br>    <span class="hljs-keyword">elif</span> args.mode == <span class="hljs-string">&quot;recognize&quot;</span>:<br>        recognize(args.image)<br><br></code></pre></td></tr></table></figure><h4 id="ç›®æ ‡ï¼š"><a href="#ç›®æ ‡ï¼š" class="headerlink" title="ç›®æ ‡ï¼š"></a>ç›®æ ‡ï¼š</h4><h5 id="1-è¿è¡Œèµ·æ¥ï¼Œç„¶åè¯†åˆ«è¿™å¼ å›¾ç‰‡ï¼Œå‚è€ƒå‘½ä»¤ï¼š"><a href="#1-è¿è¡Œèµ·æ¥ï¼Œç„¶åè¯†åˆ«è¿™å¼ å›¾ç‰‡ï¼Œå‚è€ƒå‘½ä»¤ï¼š" class="headerlink" title="1. è¿è¡Œèµ·æ¥ï¼Œç„¶åè¯†åˆ«è¿™å¼ å›¾ç‰‡ï¼Œå‚è€ƒå‘½ä»¤ï¼š"></a>1. è¿è¡Œèµ·æ¥ï¼Œç„¶åè¯†åˆ«è¿™å¼ å›¾ç‰‡ï¼Œå‚è€ƒå‘½ä»¤ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python main.py recognize --image test_2.png<br></code></pre></td></tr></table></figure><p><img src="/2025/06/26/night-before-the-big-model/image2.png"><br><img src="/2025/06/26/night-before-the-big-model/image.png"></p><h5 id="2-è§£é‡Šä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆæ¨¡å‹å®šä¹‰é‡Œæœ€åä¸€ä¸ªçº¿æ€§å±‚çš„ç»´åº¦-nn-Linear-128-10"><a href="#2-è§£é‡Šä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆæ¨¡å‹å®šä¹‰é‡Œæœ€åä¸€ä¸ªçº¿æ€§å±‚çš„ç»´åº¦-nn-Linear-128-10" class="headerlink" title="2. è§£é‡Šä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆæ¨¡å‹å®šä¹‰é‡Œæœ€åä¸€ä¸ªçº¿æ€§å±‚çš„ç»´åº¦ nn.Linear(128, 10)"></a>2. è§£é‡Šä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆæ¨¡å‹å®šä¹‰é‡Œæœ€åä¸€ä¸ªçº¿æ€§å±‚çš„ç»´åº¦ nn.Linear(128, 10)</h5><p>åœ¨è¿™ä¸ªæ¨¡å‹é‡Œï¼Œæœ€åä¸€ä¸ªå…¨è¿æ¥å±‚ï¼ˆnn.Linear(128, 10)ï¼‰çš„ä¸¤ä¸ªç»´åº¦åˆ†åˆ«å¯¹åº”ï¼š</p><p>è¾“å…¥ç»´åº¦ 128<br>ç´§æ¥åœ¨å®ƒå‰é¢çš„é‚£ä¸€å±‚æ˜¯ï¼š</p><p>nn.Linear(64 * 7 * 7, 128) nn.ReLU() nn.Dropout(0.5)<br>æ‰€ä»¥å®ƒä¼šè¾“å‡ºä¸€ä¸ªé•¿åº¦ä¸º 128 çš„ç‰¹å¾å‘é‡ï¼Œä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥å¤§å°  ã€‚</p><p>è¾“å‡ºç»´åº¦ 10<br>è¿™æ˜¯å› ä¸ºè¿™ä¸ªç½‘ç»œæ˜¯ç”¨æ¥åš MNIST æ‰‹å†™æ•°å­—åˆ†ç±» çš„ï¼Œè€Œ MNIST ä¸€å…±æœ‰ 10 ä¸ªç±»åˆ«ï¼ˆæ•°å­— 0â€“9ï¼‰ã€‚<br>æœ€åä¸€å±‚è¾“å‡º 10 ä¸ªæ•°å€¼ï¼ˆlogitsï¼‰ï¼Œæ¯ä¸ªæ•°å€¼å¯¹åº”ä¸€ä¸ªç±»åˆ«çš„â€œå¾—åˆ†â€ã€‚è®­ç»ƒæ—¶å†é…åˆ CrossEntropyLossï¼Œå®ƒä¼šæŠŠè¿™ 10 ä¸ªåˆ†æ•°è½¬æ¢æˆä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œå¹¶è®¡ç®—ä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„æŸå¤±ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œnn.Linear(128, 10) å°±æ˜¯æŠŠå‰ä¸€å±‚å­¦åˆ°çš„ 128 ç»´ç‰¹å¾ï¼Œæ˜ å°„æˆ 10 ä¸ªåˆ†ç±»å¾—åˆ†ï¼Œä»è€Œå®Œæˆ â€œç‰¹å¾ â†’ ç±»åˆ«â€ çš„è½¬æ¢ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AIå¤§æ¨¡å‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LLM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker å®‰è£… DM8</title>
    <link href="/2025/01/23/docker-install-dm8/"/>
    <url>/2025/01/23/docker-install-dm8/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨Dockerå®‰è£…DM8</p><span id="more"></span><p><a href="https://eco.dameng.com/document/dm/zh-cn/start/dm-install-docker.html">Dockerå®‰è£… | è¾¾æ¢¦æŠ€æœ¯æ–‡æ¡£</a></p><p>Dockerå®‰è£…<br>å®‰è£…å‰å‡†å¤‡<br>è½¯ç¡¬ä»¶ç‰ˆæœ¬<br>ç»ˆç«¯X86-64 æ¶æ„<br>Docker2023 å¹´ 6 æœˆç‰ˆ</p><h3 id="ä¸‹è½½-Docker-å®‰è£…åŒ…"><a href="#ä¸‹è½½-Docker-å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½ Docker å®‰è£…åŒ…"></a>ä¸‹è½½ Docker å®‰è£…åŒ…</h3><p>è¯·åœ¨è¾¾æ¢¦æ•°æ®åº“å®˜ç½‘ä¸‹è½½ <a href="https://eco.dameng.com/download/">Docker å®‰è£…åŒ…</a>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://download.dameng.com/eco/dm8/dm8_20241230_x86_rh6_64_rq_single.tar<br></code></pre></td></tr></table></figure><h3 id="å¯¼å…¥å®‰è£…åŒ…"><a href="#å¯¼å…¥å®‰è£…åŒ…" class="headerlink" title="å¯¼å…¥å®‰è£…åŒ…"></a>å¯¼å…¥å®‰è£…åŒ…</h3><p>æ‹·è´å®‰è£…åŒ…åˆ° &#x2F;opt ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¼å…¥å®‰è£…åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker load -i dm8_20230808_rev197096_x86_rh6_64_single.tar<br></code></pre></td></tr></table></figure><p>å¯¼å…¥å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ docker images æŸ¥çœ‹å¯¼å…¥çš„é•œåƒã€‚</p><h3 id="å¯åŠ¨å®¹å™¨"><a href="#å¯åŠ¨å®¹å™¨" class="headerlink" title="å¯åŠ¨å®¹å™¨"></a>å¯åŠ¨å®¹å™¨</h3><p>é•œåƒå¯¼å…¥åï¼Œä½¿ç”¨ docker run å¯åŠ¨å®¹å™¨ï¼Œå¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d -p 30236:5236 --restart=always --name dm8_test --privileged=<span class="hljs-literal">true</span> -e PAGE_SIZE=16 -e LD_LIBRARY_PATH=/opt/dmdbms/bin -e  EXTENT_SIZE=32 -e BLANK_PAD_MODE=1 -e LOG_SIZE=1024 -e UNICODE_FLAG=1 -e LENGTH_IN_CHAR=1 -e INSTANCE_NAME=dm8_test -v /data/dm8_test:/opt/dmdbms/data dm8:dm8_20241230_rev255012_x86_rh6_64<br></code></pre></td></tr></table></figure><p>å®¹å™¨å¯åŠ¨å®Œæˆåï¼Œä½¿ç”¨ docker ps æŸ¥çœ‹é•œåƒçš„å¯åŠ¨æƒ…å†µã€‚</p><p>å¯åŠ¨å®Œæˆåï¼Œå¯é€šè¿‡æ—¥å¿—æ£€æŸ¥å¯åŠ¨æƒ…å†µï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker logs -f  dm8_test<br>æˆ–<br>docker logs -f 58deb28d1209<br></code></pre></td></tr></table></figure><h3 id="å¯åŠ¨-åœæ­¢æ•°æ®åº“"><a href="#å¯åŠ¨-åœæ­¢æ•°æ®åº“" class="headerlink" title="å¯åŠ¨&#x2F;åœæ­¢æ•°æ®åº“"></a>å¯åŠ¨&#x2F;åœæ­¢æ•°æ®åº“</h3><p>åœæ­¢æ•°æ®åº“å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop  dm8_test<br></code></pre></td></tr></table></figure><p>å¯åŠ¨æ•°æ®åº“å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker start  dm8_test<br></code></pre></td></tr></table></figure><p>é‡å¯å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker restart  dm8_test<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ Docker é•œåƒä¸­æ•°æ®åº“åˆå§‹åŒ–çš„å‚æ•°ã€‚ï¼ˆåŒ…æ‹¬SYSDBAå¯†ç SYSDBA_PWDï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker inspect dm8_test<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„<br>1.å¦‚æœä½¿ç”¨ docker å®¹å™¨é‡Œé¢çš„ disqlï¼Œè¿›å…¥å®¹å™¨åï¼Œå…ˆæ‰§è¡Œ source &#x2F;etc&#x2F;profile é˜²æ­¢ä¸­æ–‡ä¹±ç ã€‚<br>2.æ–°ç‰ˆæœ¬ Docker é•œåƒä¸­æ•°æ®åº“é»˜è®¤ç”¨æˆ·å&#x2F;å¯†ç ä¸º SYSDBA&#x2F;SYSDBA001æˆ–è€…SYSDBA&#x2F;SYSDBA_dm001</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>DM8</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker å‡çº§åä¸å…¼å®¹é—®é¢˜å¤„ç†</title>
    <link href="/2024/08/09/docer-incompatible-after-upgrade/"/>
    <url>/2024/08/09/docer-incompatible-after-upgrade/</url>
    
    <content type="html"><![CDATA[<p>Dockerå‡çº§åä¸å…¼å®¹é—®é¢˜å¤„ç†</p><span id="more"></span><p><img src="/2024/08/09/docer-incompatible-after-upgrade/image.png" alt="å‡çº§åä¸å…¼å®¹æŠ¥é”™"></p><h4 id="æ›´æ”¹-var-lib-docker-containersç›®å½•ä¸­çš„æ–‡ä»¶å‚æ•°ï¼ŒæŠŠdocker-runcæ›¿æ¢ä¸ºrunc"><a href="#æ›´æ”¹-var-lib-docker-containersç›®å½•ä¸­çš„æ–‡ä»¶å‚æ•°ï¼ŒæŠŠdocker-runcæ›¿æ¢ä¸ºrunc" class="headerlink" title="æ›´æ”¹&#x2F;var&#x2F;lib&#x2F;docker&#x2F;containersç›®å½•ä¸­çš„æ–‡ä»¶å‚æ•°ï¼ŒæŠŠdocker-runcæ›¿æ¢ä¸ºrunc"></a>æ›´æ”¹&#x2F;var&#x2F;lib&#x2F;docker&#x2F;containersç›®å½•ä¸­çš„æ–‡ä»¶å‚æ•°ï¼ŒæŠŠdocker-runcæ›¿æ¢ä¸ºrunc</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep -rl <span class="hljs-string">&#x27;docker-runc&#x27;</span> /var/lib/docker/containers/ | xargs sed -i <span class="hljs-string">&#x27;s/docker-runc/runc/g&#x27;</span><br><br>systemctl restart docker<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GO trace</title>
    <link href="/2024/06/28/go-trace/"/>
    <url>/2024/06/28/go-trace/</url>
    
    <content type="html"><![CDATA[<p>[GO] trace ä½¿ç”¨</p><span id="more"></span><h3 id="1ã€è¯·ä½¿ç”¨-runtime-trace-åŒ…ï¼Œå†™ä¸€ä¸ªä½¿ç”¨traceçš„ä¾‹å­"><a href="#1ã€è¯·ä½¿ç”¨-runtime-trace-åŒ…ï¼Œå†™ä¸€ä¸ªä½¿ç”¨traceçš„ä¾‹å­" class="headerlink" title="1ã€è¯·ä½¿ç”¨ runtime&#x2F;trace åŒ…ï¼Œå†™ä¸€ä¸ªä½¿ç”¨traceçš„ä¾‹å­"></a>1ã€è¯·ä½¿ç”¨ runtime&#x2F;trace åŒ…ï¼Œå†™ä¸€ä¸ªä½¿ç”¨traceçš„ä¾‹å­</h3><ul><li>ä»£ç æ¡ˆä¾‹</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;log&quot;</span><br>    <span class="hljs-string">&quot;os&quot;</span><br>    <span class="hljs-string">&quot;runtime/trace&quot;</span><br>    <span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè·Ÿè¸ªæ–‡ä»¶</span><br>    f, err := os.Create(<span class="hljs-string">&quot;trace.out&quot;</span>)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        log.Fatal(err)<br>    &#125;<br>    <span class="hljs-keyword">defer</span> f.Close()<br><br>    <span class="hljs-comment">// å¯åŠ¨è·Ÿè¸ªï¼Œå°†æ•°æ®å†™å…¥ trace.out æ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> err := trace.Start(f); err != <span class="hljs-literal">nil</span> &#123;<br>        log.Fatal(err)<br>    &#125;<br>    <span class="hljs-keyword">defer</span> trace.Stop()<br><br>    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›æ“ä½œ</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ &#123;<br>        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>            <span class="hljs-keyword">for</span> &#123;<br>                <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›è®¡ç®—</span><br>                time.Sleep(<span class="hljs-number">100</span> * time.Millisecond)<br>            &#125;<br>        &#125;()<br>    &#125;<br><br>    <span class="hljs-comment">// è®©ä¸» goroutine è¿è¡Œä¸€æ®µæ—¶é—´</span><br>    time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>go tool trace trace.out æ‰“å¼€é¡µé¢ï¼Œåˆ†æå†…å®¹</li></ul><p><img src="/2024/06/28/go-trace/image.png" alt="go traceé¢æ¿"></p><h3 id="2ã€è¯·æè¿°-runtime-trace-åŒ…çš„ä½¿ç”¨åœºæ™¯"><a href="#2ã€è¯·æè¿°-runtime-trace-åŒ…çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="2ã€è¯·æè¿° runtime&#x2F;trace åŒ…çš„ä½¿ç”¨åœºæ™¯"></a>2ã€è¯·æè¿° runtime&#x2F;trace åŒ…çš„ä½¿ç”¨åœºæ™¯</h3><p>traceå¯ä»¥è¿›è¡Œæ€§èƒ½åˆ†æå’Œè°ƒè¯•çš„å·¥å…·ï¼Œé€‚ç”¨äºå¤„ç†å¤æ‚å¹¶å‘é—®é¢˜å’Œå®æ—¶ç³»ç»Ÿä¸­çš„æ€§èƒ½ç›‘æ§ï¼Œæ¯”å¦‚æŸäº›å‡½æ•°å¯èƒ½æ‰§è¡Œé€Ÿåº¦è¾ƒæ…¢ï¼Œé€šè¿‡ traceï¼Œå¯ä»¥æ‰¾å‡ºè¿™äº›å‡½æ•°ï¼Œå¹¶è¿›è¡Œä¼˜åŒ–ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GO ä»£ç å®‰å…¨æŒ‡å—</title>
    <link href="/2024/04/25/go-code-security/"/>
    <url>/2024/04/25/go-code-security/</url>
    
    <content type="html"><![CDATA[<p>[GO] ä»£ç å®‰å…¨æŒ‡å—</p><span id="more"></span><p><a href="https://github.com/Tencent/secguide/blob/main/Go%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97.md">GOä»£ç å®‰å…¨æŒ‡å—</a></p><p>é¢˜ç›®ï¼š<br>è¯·é€‰å– top3 é™¤ï¼ˆ1.1å†…å®¹ï¼‰ï¼Œä½œä¸ºä½ è§‰å¾—å¯¹äºæˆ‘ä»¬é‡è¦çš„ç‚¹ï¼Œå¹¶è¯´æ˜åŸå› ã€‚</p><h2 id="TOP1"><a href="#TOP1" class="headerlink" title="TOP1"></a>TOP1</h2><p>1.1.2ã€å¿…é¡»ã€‘nilæŒ‡é’ˆåˆ¤æ–­<br>è¿›è¡ŒæŒ‡é’ˆæ“ä½œæ—¶ï¼Œå¿…é¡»åˆ¤æ–­è¯¥æŒ‡é’ˆæ˜¯å¦ä¸ºnilï¼Œé˜²æ­¢ç¨‹åºpanicï¼Œå°¤å…¶åœ¨è¿›è¡Œç»“æ„ä½“Unmarshalæ—¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Packet <span class="hljs-keyword">struct</span> &#123;<br>PackeyType    <span class="hljs-type">uint8</span><br>PackeyVersion <span class="hljs-type">uint8</span><br>Data          *Data<br>&#125;<br><br><span class="hljs-keyword">type</span> Data <span class="hljs-keyword">struct</span> &#123;<br>Stat <span class="hljs-type">uint8</span><br>Len  <span class="hljs-type">uint8</span><br>Buf  [<span class="hljs-number">8</span>]<span class="hljs-type">byte</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *Packet)</span></span> UnmarshalBinary(b []<span class="hljs-type">byte</span>) <span class="hljs-type">error</span> &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(b) &lt; <span class="hljs-number">2</span> &#123;<br><span class="hljs-keyword">return</span> io.EOF<br>&#125;<br><br>p.PackeyType = b[<span class="hljs-number">0</span>]<br>p.PackeyVersion = b[<span class="hljs-number">1</span>]<br><br><span class="hljs-comment">// è‹¥é•¿åº¦ç­‰äº2ï¼Œé‚£ä¹ˆä¸ä¼šnew Data</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(b) &gt; <span class="hljs-number">2</span> &#123;<br>p.Data = <span class="hljs-built_in">new</span>(Data)<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">// bad: æœªåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºnil</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>packet := <span class="hljs-built_in">new</span>(Packet)<br>data := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">2</span>)<br><span class="hljs-keyword">if</span> err := packet.UnmarshalBinary(data); err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;Failed to unmarshal packet&quot;</span>)<br><span class="hljs-keyword">return</span><br>&#125;<br><br>fmt.Printf(<span class="hljs-string">&quot;Stat: %v\n&quot;</span>, packet.Data.Stat)<br>&#125;<br><br><span class="hljs-comment">// good: åˆ¤æ–­DataæŒ‡é’ˆæ˜¯å¦ä¸ºnil</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>packet := <span class="hljs-built_in">new</span>(Packet)<br>data := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">2</span>)<br><br><span class="hljs-keyword">if</span> err := packet.UnmarshalBinary(data); err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;Failed to unmarshal packet&quot;</span>)<br><span class="hljs-keyword">return</span><br>&#125;<br><br><span class="hljs-keyword">if</span> packet.Data == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br><br>fmt.Printf(<span class="hljs-string">&quot;Stat: %v\n&quot;</span>, packet.Data.Stat)<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>åŸå› ï¼š<br>1ã€å¦‚æœä¸€ä¸ªæŒ‡é’ˆå˜é‡æ²¡æœ‰è¢«æ˜¾å¼åœ°åˆå§‹åŒ–ä¸ºæŸä¸ªå€¼ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤å€¼å°†ä¸º nilã€‚åœ¨å¯¹è¿™æ ·çš„æŒ‡é’ˆè¿›è¡Œè§£å¼•ç”¨æ“ä½œæ—¶ï¼Œä¼šå¯¼è‡´ç©ºæŒ‡é’ˆè§£å¼•ç”¨é”™è¯¯ã€‚<br>2ã€åœ¨è§£æ JSON æˆ– XML æ•°æ®å¹¶å°†å…¶æ˜ å°„åˆ°ç»“æ„ä½“æ—¶ï¼Œå¦‚æœç›®æ ‡ç»“æ„ä½“ä¸­çš„å­—æ®µæ˜¯æŒ‡é’ˆç±»å‹ï¼Œå¹¶ä¸” JSON æˆ– XML ä¸­æ²¡æœ‰å¯¹åº”çš„å­—æ®µï¼Œé‚£ä¹ˆè¿™äº›å­—æ®µçš„å€¼å°†ä¼šè¢«è§£æä¸º nil</p></blockquote><h2 id="TOP2"><a href="#TOP2" class="headerlink" title="TOP2"></a>TOP2</h2><p>1.1.7ã€å¿…é¡»ã€‘ç¡®ä¿æ¯ä¸ªåç¨‹éƒ½èƒ½é€€å‡º<br>å¯åŠ¨ä¸€ä¸ªåç¨‹å°±ä¼šåšä¸€ä¸ªå…¥æ ˆæ“ä½œï¼Œåœ¨ç³»ç»Ÿä¸é€€å‡ºçš„æƒ…å†µä¸‹ï¼Œåç¨‹ä¹Ÿæ²¡æœ‰è®¾ç½®é€€å‡ºæ¡ä»¶ï¼Œåˆ™ç›¸å½“äºåç¨‹å¤±å»äº†æ§åˆ¶ï¼Œå®ƒå ç”¨çš„èµ„æºæ— æ³•å›æ”¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// bad: åç¨‹æ²¡æœ‰è®¾ç½®é€€å‡ºæ¡ä»¶</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doWaiter</span><span class="hljs-params">(name <span class="hljs-type">string</span>, second <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br>time.Sleep(time.Duration(second) * time.Second)<br>fmt.Println(name, <span class="hljs-string">&quot; is ready!&quot;</span>)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>åŸå› ï¼š<br>1ã€å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼æˆ–ç¨‹åºé˜»å¡çš„æƒ…å†µå‘ç”Ÿ<br> é€€å‡ºæ–¹å¼ï¼š<br>ä½¿ç”¨é€šé“ï¼ˆchannelï¼‰ï¼šé€šè¿‡é€šé“æ¥è¿›è¡Œåç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå½“æŸä¸ªæ¡ä»¶æ»¡è¶³æ—¶ï¼Œå‘é€šé“å‘é€ä¿¡å·ï¼Œè®©åç¨‹é€€å‡ºã€‚<br>ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ï¼šé€šè¿‡ä¸Šä¸‹æ–‡æ¥æ§åˆ¶åç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå½“ä¸Šä¸‹æ–‡è¢«å–æ¶ˆæˆ–è¶…æ—¶æ—¶ï¼Œåç¨‹ä¼šæ”¶åˆ°é€šçŸ¥å¹¶é€€å‡ºã€‚<br>ä½¿ç”¨ select è¯­å¥ï¼šåœ¨åç¨‹ä¸­ä½¿ç”¨ select è¯­å¥ç›‘å¬å¤šä¸ªé€šé“ï¼Œå½“æŸä¸ªé€šé“å…³é—­æˆ–æœ‰æ•°æ®æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„æ“ä½œé€€å‡ºåç¨‹ã€‚ </p></blockquote><h2 id="TOP3"><a href="#TOP3" class="headerlink" title="TOP3"></a>TOP3</h2><p>1.1.9ã€æ¨èã€‘ä¸ä½¿ç”¨sliceä½œä¸ºå‡½æ•°å…¥å‚<br>sliceåœ¨ä½œä¸ºå‡½æ•°å…¥å‚æ—¶ï¼Œå‡½æ•°å†…å¯¹sliceçš„ä¿®æ”¹å¯èƒ½ä¼šå½±å“åŸå§‹æ•°æ®</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// bad</span><br> <span class="hljs-comment">// sliceä½œä¸ºå‡½æ•°å…¥å‚æ—¶åŒ…å«åŸå§‹æ•°ç»„æŒ‡é’ˆ</span><br> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">modify</span><span class="hljs-params">(array []<span class="hljs-type">int</span>)</span></span> &#123;<br>     array[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span> <span class="hljs-comment">// å¯¹å…¥å‚sliceçš„å…ƒç´ ä¿®æ”¹ä¼šå½±å“åŸå§‹æ•°æ®</span><br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>     array := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br> <br>     modify(array)<br>     fmt.Println(array) <span class="hljs-comment">// outputï¼š[10 2 3 4 5]</span><br> &#125;<br><br> <span class="hljs-comment">// good</span><br> <span class="hljs-comment">// æ•°ç»„ä½œä¸ºå‡½æ•°å…¥å‚ï¼Œè€Œä¸æ˜¯slice</span><br> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">modify</span><span class="hljs-params">(array [5]<span class="hljs-type">int</span>)</span></span> &#123;<br>   array[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span><br> &#125;<br><br> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>     <span class="hljs-comment">// ä¼ å…¥æ•°ç»„ï¼Œæ³¨æ„æ•°ç»„ä¸sliceçš„åŒºåˆ«</span><br>     array := [<span class="hljs-number">5</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br> <br>     modify(array)<br>     fmt.Println(array)<br> &#125;<br></code></pre></td></tr></table></figure><blockquote><p>åŸå› ï¼š<br>1ã€sliceæ˜¯å¼•ç”¨ç±»å‹ï¼Œå¦‚æœå‡½æ•°å¯¹ä¼ å…¥çš„ slice è¿›è¡ŒåŸåœ°ä¿®æ”¹ï¼Œé‚£ä¹ˆè°ƒç”¨å‡½æ•°çš„åœ°æ–¹çš„åŸå§‹æ•°æ®ä¹Ÿä¼šè¢«ä¿®æ”¹<br>2ã€å½“åŒä¸€ä¸ª slice ä½œä¸ºå¤šä¸ªå‡½æ•°çš„å…¥å‚æ—¶ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªå‡½æ•°ä¿®æ”¹äº† slice çš„å†…å®¹ï¼Œé‚£ä¹ˆå…¶ä»–å‡½æ•°å¯èƒ½ä¼šå—åˆ°å½±å“ï¼Œé€ æˆä¸ä¸€è‡´çš„ç»“æœã€‚<br>å»ºè®®ï¼šé€šå¸¸æ¨èå°† slice è§†ä¸ºåªè¯»çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä½¿ç”¨å‡½æ•°çš„è¿”å›å€¼æ¥ä¼ é€’ä¿®æ”¹åçš„æ•°æ®ã€‚å¦‚æœå‡½æ•°éœ€è¦ä¿®æ”¹ slice çš„å†…å®¹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ sliceï¼Œå¹¶å°†ä¿®æ”¹åçš„æ•°æ®è¿”å›ç»™è°ƒç”¨æ–¹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å‡½æ•°çš„è¡Œä¸ºæ›´åŠ å¯é¢„æµ‹ï¼Œå‡å°‘å‰¯ä½œç”¨ï¼Œå¹¶æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker å®‰è£… DB2</title>
    <link href="/2024/04/02/docker-install-db2/"/>
    <url>/2024/04/02/docker-install-db2/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨Dockerå®‰è£…DB2</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker pull ibmcom/db2<br><br>docker run -d -p 50000:50000 --name db2 --privileged=<span class="hljs-literal">true</span> -e DB2INST1_PASSWORD=actionsky   -e DBNAME=wanghc -e LICENSE=accept -v /usr/local/db2:/database ibmcom/db2<br><br>docker logs -f db2<br></code></pre></td></tr></table></figure><p><img src="/2024/04/02/docker-install-db2/image.png" alt="è¿æ¥ä¿¡æ¯"></p>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>DB2</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/1998/12/12/hello-world/"/>
    <url>/1998/12/12/hello-world/</url>
    
    <content type="html"><![CDATA[<h3 id="ä½ å¥½ï¼Œä¸–ç•Œï¼"><a href="#ä½ å¥½ï¼Œä¸–ç•Œï¼" class="headerlink" title="ä½ å¥½ï¼Œä¸–ç•Œï¼"></a>ä½ å¥½ï¼Œä¸–ç•Œï¼</h3>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
